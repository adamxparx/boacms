{% extends 'accounts/dashboard.html' %}
{% load static %}

{% block title %}Certification Request Form | Barangay OACMS{% endblock %}

{% block content %}

  <div class="cert_content">
    {% block cert_content %}
    <div class="auth-wrapper">
      <div class="auth-card auth-card--wide">

        <div class="auth-header">
          <h2 class="auth-title">Book a Certificate</h2>
          <p class="auth-subtitle">Provide your appointment details below.</p>
        </div>

        {% if form.non_field_errors %}
            <div class="auth-alert auth-alert--error">
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="auth-form auth-form--grid" id="appointment-form">
          {% csrf_token %}

          <div class="form-field">
            <label for="{{ form.certificate_type.id_for_label }}">{{ form.certificate_type.label }}</label>
            {{ form.certificate_type }}
            {% for error in form.certificate_type.errors %}
                <span class="field-error">{{ error }}</span>
            {% endfor %}
          </div>

          <div class="form-field" style="grid-column: span 2;">
            <label for="{{ form.purpose.id_for_label }}">{{ form.purpose.label }}</label>
            {{ form.purpose }}
            {% for error in form.purpose.errors %}
                <span class="field-error">{{ error }}</span>
            {% endfor %}
          </div>

          <div class="form-field">
            <label for="{{ form.preferred_date.id_for_label }}">{{ form.preferred_date.label }}</label>
            {{ form.preferred_date }}
            {% for error in form.preferred_date.errors %}
                <span class="field-error">{{ error }}</span>
            {% endfor %}
          </div>

          <div class="form-field">
            <label for="{{ form.preferred_time.id_for_label }}">{{ form.preferred_time.label }}</label>
            {{ form.preferred_time }}
            {% for error in form.preferred_time.errors %}
                <span class="field-error">{{ error }}</span>
            {% endfor %}
          </div>

          <div class="form-submit">
            <div class="requirements-link" style="text-align: center; margin-bottom: 15px;">
              <a href="{% url 'requirements' %}" style="color: #2196F3; text-decoration: none;">
                <i class="fas fa-list"></i> See list of requirements
              </a>
            </div>
            <div class="form-action">
              <button type="submit" id="submit-button">Book Appointment</button>
            </div>
          </div>
        </form>
      </div>
    </div>

  </div>
  {% endblock %}
</div>

<script src="{% static 'appointments/js/date_restriction.js' %}"></script>
<script src="{% static 'appointments/js/time_restriction.js' %}"></script>
<script src="{% static 'appointments/js/disabled_booking_button.js' %}"></script>

{% endblock %}
